"use strict";
//# sourceURL=_answers.js

<answers>

  <h2>Income</h2>
  <answeritem each={ income } answer={this}></answeritem>

  <h2>Expenditure</h2>
  <answeritem each={ expenditure } answer={this}></answeritem>

  <script>
  var self = this;
  self.answers = [];
  self.income = [];
  self.expenditure = [];

  this.on("mount", function() {
    RiotControl.trigger("Answers::ON_MOUNT");
  });

  RiotControl.on("Answers::ON_CHANGE", function(answers) {
    console.log("answers.html", "answers change", answers);

    self.answers = answers;
    self.income = self.answers.filter(function(ans) {
      return (ans.group === "INCOME");
    });
    self.expenditure = self.answers.filter(function(ans) {
      return (ans.group === "EXPENDITURE");
    });

    self.update();
  });
  </script>
</answers>


<answeritem>
  <span>
    <label>{answer.prompt}
      <input type="number" value="{answer.amount}" oninput="{amountChange}" />
    </label>
    <frequency answer={answer} />
    <br/>
  </span>

  <script>
    this.answer = opts.answer;

    amountChange(e) {
      this.answer.amount = e.target.value;
      RiotControl.trigger("Answer::ON_CHANGE", this.answer);
    }

  </script>
</answeritem>

<frequency>
  <span>
    <select value={answer.frequency} onchange="{frequencyChange}">
      <option each={FREQUENCY_OPTIONS} value={code}>{ask}</option>
    </select>
  </span>

  <script>
  var self = this;
  this.answer = opts.answer;

  self.FREQUENCY_OPTIONS = [
    { code: "WEEKLY", ask: "Weekly"},
    { code: "FORTNIGHTLY", ask: "Fortnightly"},
    { code: "4WEEKLY", ask: "4-Weekly"},
    { code: "MONTHLY", ask: "Monthly"},
    { code: "YEARLY", ask: "Yearly"}
  ];

  frequencyChange(e) {
    this.answer.frequency = e.target.value;
    RiotControl.trigger("Answer::ON_CHANGE", this.answer);
  }


  </script>
</frequency>
